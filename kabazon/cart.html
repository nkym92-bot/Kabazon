<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kabazon„Ç´„Éº„Éà</title>
    <link rel="icon" href="img/logo.jpg" type="image/jpeg">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="common-header"></div>

    <div class="container">
        <div class="cart-main">
            <h1>„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞„Ç´„Éº„Éà</h1>
            <div id="cart-list"></div>
        </div>
        <div class="cart-sidebar">
            <div class="subtotal" style="font-size:18px; font-weight:bold; margin-bottom:20px;">
                Â∞èË®à (<span id="total-count">0</span> ÁÇπ): <span style="color:#B12704;">Ôø•<span id="total-price">0</span></span>
            </div>
            <button class="checkout-btn" onclick="alert('„É¨„Ç∏„Å´ÈÄ≤„Åø„Åæ„ÅôÔºàÂòò„Åß„ÅôÔºâ')">„É¨„Ç∏„Å´ÈÄ≤„ÇÄ</button>
        </div>
    </div>

    <div id="common-footer"></div>

    <script src="layout.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', renderCart);

        function renderCart() {
            const cart = JSON.parse(localStorage.getItem('kabazonCart')) || [];
            const list = document.getElementById('cart-list');
            list.innerHTML = '';
            let total = 0;

            if (cart.length === 0) {
                list.innerHTML = '<div style="text-align:center; padding:50px;"><h2>„Ç´„Éº„Éà„ÅØÁ©∫„Åß„Åô</h2></div>';
            } else {
                cart.forEach((item, index) => {
                    total += parseInt(item.price);
                    list.innerHTML += `
                        <div class="cart-item">
                            <div class="item-image">${item.imageEmoji || 'üì¶'}</div>
                            <div style="flex:1;">
                                <div style="font-weight:bold; color:#007185;">${item.name}</div>
                                <div style="color:#B12704; font-weight:bold;">Ôø•${item.price.toLocaleString()}</div>
                                <button onclick="removeItem(${index})" style="color:#007185; border:none; background:none; cursor:pointer; text-decoration:underline;">ÂâäÈô§</button>
                            </div>
                        </div>`;
                });
            }
            document.getElementById('total-count').innerText = cart.length;
            document.getElementById('total-price').innerText = total.toLocaleString();
        }

        function removeItem(index) {
            const cart = JSON.parse(localStorage.getItem('kabazonCart')) || [];
            cart.splice(index, 1);
            localStorage.setItem('kabazonCart', JSON.stringify(cart));
            renderCart();
            updateHeaderCartCount();
        }
    </script>
</body>
</html>